# カートリッジヘッダ

アドレス | サイズ(バイト) | 内容
---- | ---- | ---- 
0x0000 | 4   | ROMエントリーポイント  (32bitのARM分岐命令, 例: "B rom_start")
0x0004 | 156 | Nintendo Logo(圧縮されたbitmap)
0x00A0 | 12  | ゲームタイトル (大文字ASCII)
0x00AC | 4   | ゲームコード (大文字ASCII)
0x00B0 | 2   | メーカーコード (大文字ASCII)
0x00B2 | 1   | 0x96
0x00B3 | 1   | 0x00
0x00B4 | 1   | デバイスタイプ (基本的に0x00)
0x00B5 | 7   | 予約領域(0)
0x00BC | 1   | ソフトウェアバージョン (基本的に0x00)
0x00BD | 1   | ヘッダのチェックサム
0x00BE | 2   | 予約領域(0)

**マルチブート時**

アドレス | サイズ(バイト) | 内容
---- | ---- | ---- 
0x00C0 | 4   | RAMエントリーポイント 
0x00C4 | 1   | ブートモード
0x00C5 | 1   | SlaveID  
0x00C6 | 26   | 未使用  
0x00E0 | 4   | JOYBUSエントリーポイント  

エントリーポイントではCPUはシステムモードで実行されます。

## 0x00 - エントリーポイント

カートリッジの実際のスタートアドレスにリダイレクトする32bit ARMオペコード用の領域で、通常は "B ${start}"命令が入ります。

注意: このエントリはMultibootスレーブGBAでは無視されます(実際には、このエントリは上書きされ、以下で説明するように別のMultibootエントリポイントにリダイレクトされます)。

## 0x04-0x9f - 任天堂のロゴ

起動時に表示される任天堂のロゴを圧縮したデータが含まれています。このデータが欠損していたりするとカートリッジは動作しません。

圧縮データのコピーはBIOSに保存されており、GBAは2つのデータを比較し、BIOSのデータがカートリッジ(またはマルチブートヘッダ)と一致しない場合は動作を停止します。

## 0xa0 - ゲームタイトル

ゲームタイトルがASCIIフォーマットで格納されています。

最大12文字、全て大文字で`00`が終端文字を表しています。

## 0xac - ゲームコード

ゲームカセットの`AGB-UTTD`に対応するゲームコードが格納されています。

- U: ユニークコード
- TT: ショートタイトル
- D: ROMの言語

例: ロックマンエグゼ6 電脳獣ファルザー(JPN): AGB-BR6J

### U

コード | 内容
-- | -- 
A | 通常のゲーム (2001~2003)
B | 通常のゲーム (2003~)
C | 通常のゲーム (未使用)
F | NESシリーズ
K | 『ヨッシーの万有引力』 & 『コロコロパズル ハッピィパネッチュ!』
P | e-リーダー
R | 『まわるメイド イン ワリオ』
U | 『ボクらの太陽』 & 『続・ボクらの太陽』
V | 『スクリューブレイカー 轟振どりるれろ』

## 0xbd - ヘッダのチェックサム

ヘッダのチェックサムで、これが正しくない場合カートリッジは起動しません。

次のように計算します。

```go
chk := byte(0)
for i := 0xA0; i <= 0xBC; i++ {
    chk = chk - [i]
    chk = (chk - 0x19) & 0xff
}
```

